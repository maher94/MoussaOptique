{"ast":null,"code":"/**\n * Copyright 2013-2014 Facebook, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @providesModule TapEventPlugin\n * @typechecks static-only\n */\n\"use strict\";\n\nvar EventConstants = require('react-dom/lib/EventConstants');\n\nvar EventPluginUtils = require('react-dom/lib/EventPluginUtils');\n\nvar EventPropagators = require('react-dom/lib/EventPropagators');\n\nvar SyntheticUIEvent = require('react-dom/lib/SyntheticUIEvent');\n\nvar TouchEventUtils = require('./TouchEventUtils');\n\nvar ViewportMetrics = require('react-dom/lib/ViewportMetrics');\n\nvar keyOf = require('fbjs/lib/keyOf');\n\nvar topLevelTypes = EventConstants.topLevelTypes;\nvar isStartish = EventPluginUtils.isStartish;\nvar isEndish = EventPluginUtils.isEndish;\n\nvar isTouch = function (topLevelType) {\n  var touchTypes = ['topTouchCancel', 'topTouchEnd', 'topTouchStart', 'topTouchMove'];\n  return touchTypes.indexOf(topLevelType) >= 0;\n};\n/**\n * Number of pixels that are tolerated in between a `touchStart` and `touchEnd`\n * in order to still be considered a 'tap' event.\n */\n\n\nvar tapMoveThreshold = 10;\nvar ignoreMouseThreshold = 750;\nvar startCoords = {\n  x: null,\n  y: null\n};\nvar lastTouchEvent = null;\nvar Axis = {\n  x: {\n    page: 'pageX',\n    client: 'clientX',\n    envScroll: 'currentPageScrollLeft'\n  },\n  y: {\n    page: 'pageY',\n    client: 'clientY',\n    envScroll: 'currentPageScrollTop'\n  }\n};\n\nfunction getAxisCoordOfEvent(axis, nativeEvent) {\n  var singleTouch = TouchEventUtils.extractSingleTouch(nativeEvent);\n\n  if (singleTouch) {\n    return singleTouch[axis.page];\n  }\n\n  return axis.page in nativeEvent ? nativeEvent[axis.page] : nativeEvent[axis.client] + ViewportMetrics[axis.envScroll];\n}\n\nfunction getDistance(coords, nativeEvent) {\n  var pageX = getAxisCoordOfEvent(Axis.x, nativeEvent);\n  var pageY = getAxisCoordOfEvent(Axis.y, nativeEvent);\n  return Math.pow(Math.pow(pageX - coords.x, 2) + Math.pow(pageY - coords.y, 2), 0.5);\n}\n\nvar touchEvents = ['topTouchStart', 'topTouchCancel', 'topTouchEnd', 'topTouchMove'];\nvar dependencies = ['topMouseDown', 'topMouseMove', 'topMouseUp'].concat(touchEvents);\nvar eventTypes = {\n  touchTap: {\n    phasedRegistrationNames: {\n      bubbled: keyOf({\n        onTouchTap: null\n      }),\n      captured: keyOf({\n        onTouchTapCapture: null\n      })\n    },\n    dependencies: dependencies\n  }\n};\n\nvar now = function () {\n  if (Date.now) {\n    return Date.now;\n  } else {\n    // IE8 support: http://stackoverflow.com/questions/9430357/please-explain-why-and-how-new-date-works-as-workaround-for-date-now-in\n    return function () {\n      return +new Date();\n    };\n  }\n}();\n\nfunction createTapEventPlugin(shouldRejectClick) {\n  return {\n    tapMoveThreshold: tapMoveThreshold,\n    ignoreMouseThreshold: ignoreMouseThreshold,\n    eventTypes: eventTypes,\n\n    /**\n     * @param {string} topLevelType Record from `EventConstants`.\n     * @param {DOMEventTarget} targetInst The listening component root node.\n     * @param {object} nativeEvent Native browser event.\n     * @return {*} An accumulation of synthetic events.\n     * @see {EventPluginHub.extractEvents}\n     */\n    extractEvents: function (topLevelType, targetInst, nativeEvent, nativeEventTarget) {\n      if (!isStartish(topLevelType) && !isEndish(topLevelType)) {\n        return null;\n      }\n\n      if (isTouch(topLevelType)) {\n        lastTouchEvent = now();\n      } else {\n        if (shouldRejectClick(lastTouchEvent, now())) {\n          return null;\n        }\n      }\n\n      var event = null;\n      var distance = getDistance(startCoords, nativeEvent);\n\n      if (isEndish(topLevelType) && distance < tapMoveThreshold) {\n        event = SyntheticUIEvent.getPooled(eventTypes.touchTap, targetInst, nativeEvent, nativeEventTarget);\n      }\n\n      if (isStartish(topLevelType)) {\n        startCoords.x = getAxisCoordOfEvent(Axis.x, nativeEvent);\n        startCoords.y = getAxisCoordOfEvent(Axis.y, nativeEvent);\n      } else if (isEndish(topLevelType)) {\n        startCoords.x = 0;\n        startCoords.y = 0;\n      }\n\n      EventPropagators.accumulateTwoPhaseDispatches(event);\n      return event;\n    }\n  };\n}\n\nmodule.exports = createTapEventPlugin;","map":{"version":3,"sources":["C:/Users/mamoussa/project/moc/node_modules/react-tap-event-plugin/src/TapEventPlugin.js"],"names":["EventConstants","require","EventPluginUtils","EventPropagators","SyntheticUIEvent","TouchEventUtils","ViewportMetrics","keyOf","topLevelTypes","isStartish","isEndish","isTouch","topLevelType","touchTypes","indexOf","tapMoveThreshold","ignoreMouseThreshold","startCoords","x","y","lastTouchEvent","Axis","page","client","envScroll","getAxisCoordOfEvent","axis","nativeEvent","singleTouch","extractSingleTouch","getDistance","coords","pageX","pageY","Math","pow","touchEvents","dependencies","concat","eventTypes","touchTap","phasedRegistrationNames","bubbled","onTouchTap","captured","onTouchTapCapture","now","Date","createTapEventPlugin","shouldRejectClick","extractEvents","targetInst","nativeEventTarget","event","distance","getPooled","accumulateTwoPhaseDispatches","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright 2013-2014 Facebook, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @providesModule TapEventPlugin\n * @typechecks static-only\n */\n\n\"use strict\";\n\nvar EventConstants = require('react-dom/lib/EventConstants');\nvar EventPluginUtils = require('react-dom/lib/EventPluginUtils');\nvar EventPropagators = require('react-dom/lib/EventPropagators');\nvar SyntheticUIEvent = require('react-dom/lib/SyntheticUIEvent');\nvar TouchEventUtils = require('./TouchEventUtils');\nvar ViewportMetrics = require('react-dom/lib/ViewportMetrics');\n\nvar keyOf = require('fbjs/lib/keyOf');\nvar topLevelTypes = EventConstants.topLevelTypes;\n\nvar isStartish = EventPluginUtils.isStartish;\nvar isEndish = EventPluginUtils.isEndish;\n\nvar isTouch = function(topLevelType) {\n  var touchTypes = [\n    'topTouchCancel',\n    'topTouchEnd',\n    'topTouchStart',\n    'topTouchMove'\n  ];\n  return touchTypes.indexOf(topLevelType) >= 0;\n}\n\n/**\n * Number of pixels that are tolerated in between a `touchStart` and `touchEnd`\n * in order to still be considered a 'tap' event.\n */\nvar tapMoveThreshold = 10;\nvar ignoreMouseThreshold = 750;\nvar startCoords = {x: null, y: null};\nvar lastTouchEvent = null;\n\nvar Axis = {\n  x: {page: 'pageX', client: 'clientX', envScroll: 'currentPageScrollLeft'},\n  y: {page: 'pageY', client: 'clientY', envScroll: 'currentPageScrollTop'}\n};\n\nfunction getAxisCoordOfEvent(axis, nativeEvent) {\n  var singleTouch = TouchEventUtils.extractSingleTouch(nativeEvent);\n  if (singleTouch) {\n    return singleTouch[axis.page];\n  }\n  return axis.page in nativeEvent ?\n    nativeEvent[axis.page] :\n    nativeEvent[axis.client] + ViewportMetrics[axis.envScroll];\n}\n\nfunction getDistance(coords, nativeEvent) {\n  var pageX = getAxisCoordOfEvent(Axis.x, nativeEvent);\n  var pageY = getAxisCoordOfEvent(Axis.y, nativeEvent);\n  return Math.pow(\n    Math.pow(pageX - coords.x, 2) + Math.pow(pageY - coords.y, 2),\n    0.5\n  );\n}\n\nvar touchEvents = [\n  'topTouchStart',\n  'topTouchCancel',\n  'topTouchEnd',\n  'topTouchMove',\n];\n\nvar dependencies = [\n  'topMouseDown',\n  'topMouseMove',\n  'topMouseUp',\n].concat(touchEvents);\n\nvar eventTypes = {\n  touchTap: {\n    phasedRegistrationNames: {\n      bubbled: keyOf({onTouchTap: null}),\n      captured: keyOf({onTouchTapCapture: null})\n    },\n    dependencies: dependencies\n  }\n};\n\nvar now = (function() {\n  if (Date.now) {\n    return Date.now;\n  } else {\n    // IE8 support: http://stackoverflow.com/questions/9430357/please-explain-why-and-how-new-date-works-as-workaround-for-date-now-in\n    return function () {\n      return +new Date;\n    }\n  }\n})();\n\nfunction createTapEventPlugin(shouldRejectClick) {\n  return {\n\n    tapMoveThreshold: tapMoveThreshold,\n\n    ignoreMouseThreshold: ignoreMouseThreshold,\n\n    eventTypes: eventTypes,\n\n    /**\n     * @param {string} topLevelType Record from `EventConstants`.\n     * @param {DOMEventTarget} targetInst The listening component root node.\n     * @param {object} nativeEvent Native browser event.\n     * @return {*} An accumulation of synthetic events.\n     * @see {EventPluginHub.extractEvents}\n     */\n    extractEvents: function(\n      topLevelType,\n      targetInst,\n      nativeEvent,\n      nativeEventTarget\n    ) {\n\n      if (!isStartish(topLevelType) && !isEndish(topLevelType)) {\n        return null;\n      }\n\n      if (isTouch(topLevelType)) {\n        lastTouchEvent = now();\n      } else {\n        if (shouldRejectClick(lastTouchEvent, now())) {\n          return null;\n        }\n      }\n\n      var event = null;\n      var distance = getDistance(startCoords, nativeEvent);\n      if (isEndish(topLevelType) && distance < tapMoveThreshold) {\n        event = SyntheticUIEvent.getPooled(\n          eventTypes.touchTap,\n          targetInst,\n          nativeEvent,\n          nativeEventTarget\n        );\n      }\n      if (isStartish(topLevelType)) {\n        startCoords.x = getAxisCoordOfEvent(Axis.x, nativeEvent);\n        startCoords.y = getAxisCoordOfEvent(Axis.y, nativeEvent);\n      } else if (isEndish(topLevelType)) {\n        startCoords.x = 0;\n        startCoords.y = 0;\n      }\n      EventPropagators.accumulateTwoPhaseDispatches(event);\n      return event;\n    }\n\n  };\n}\n\nmodule.exports = createTapEventPlugin;\n"]},"metadata":{},"sourceType":"script"}