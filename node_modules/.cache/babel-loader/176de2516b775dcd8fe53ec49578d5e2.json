{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _simpleAssign = require('simple-assign');\n\nvar _simpleAssign2 = _interopRequireDefault(_simpleAssign);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactEventListener = require('react-event-listener');\n\nvar _reactEventListener2 = _interopRequireDefault(_reactEventListener);\n\nvar _RenderToLayer = require('../internal/RenderToLayer');\n\nvar _RenderToLayer2 = _interopRequireDefault(_RenderToLayer);\n\nvar _propTypes3 = require('../utils/propTypes');\n\nvar _propTypes4 = _interopRequireDefault(_propTypes3);\n\nvar _Paper = require('../Paper');\n\nvar _Paper2 = _interopRequireDefault(_Paper);\n\nvar _lodash = require('lodash.throttle');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _PopoverAnimationDefault = require('./PopoverAnimationDefault');\n\nvar _PopoverAnimationDefault2 = _interopRequireDefault(_PopoverAnimationDefault);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar styles = {\n  root: {\n    display: 'none'\n  }\n};\n\nvar Popover = function (_Component) {\n  (0, _inherits3.default)(Popover, _Component);\n\n  function Popover(props, context) {\n    (0, _classCallCheck3.default)(this, Popover);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Popover.__proto__ || (0, _getPrototypeOf2.default)(Popover)).call(this, props, context));\n\n    _this.timeout = null;\n\n    _this.renderLayer = function () {\n      var _this$props = _this.props,\n          animated = _this$props.animated,\n          animation = _this$props.animation,\n          anchorEl = _this$props.anchorEl,\n          anchorOrigin = _this$props.anchorOrigin,\n          autoCloseWhenOffScreen = _this$props.autoCloseWhenOffScreen,\n          canAutoPosition = _this$props.canAutoPosition,\n          children = _this$props.children,\n          onRequestClose = _this$props.onRequestClose,\n          style = _this$props.style,\n          targetOrigin = _this$props.targetOrigin,\n          useLayerForClickAway = _this$props.useLayerForClickAway,\n          other = (0, _objectWithoutProperties3.default)(_this$props, ['animated', 'animation', 'anchorEl', 'anchorOrigin', 'autoCloseWhenOffScreen', 'canAutoPosition', 'children', 'onRequestClose', 'style', 'targetOrigin', 'useLayerForClickAway']);\n      var styleRoot = style;\n\n      if (!animated) {\n        styleRoot = {\n          position: 'fixed',\n          zIndex: _this.context.muiTheme.zIndex.popover\n        };\n\n        if (!_this.state.open) {\n          return null;\n        }\n\n        return _react2.default.createElement(_Paper2.default, (0, _extends3.default)({\n          style: (0, _simpleAssign2.default)(styleRoot, style)\n        }, other), children);\n      }\n\n      var Animation = animation || _PopoverAnimationDefault2.default;\n      return _react2.default.createElement(Animation, (0, _extends3.default)({\n        targetOrigin: targetOrigin,\n        style: styleRoot\n      }, other, {\n        open: _this.state.open && !_this.state.closing\n      }), children);\n    };\n\n    _this.componentClickAway = function () {\n      _this.requestClose('clickAway');\n    };\n\n    _this.setPlacement = function (scrolling) {\n      if (!_this.state.open) {\n        return;\n      }\n\n      if (!_this.refs.layer.getLayer()) {\n        return;\n      }\n\n      var targetEl = _this.refs.layer.getLayer().children[0];\n\n      if (!targetEl) {\n        return;\n      }\n\n      var _this$props2 = _this.props,\n          targetOrigin = _this$props2.targetOrigin,\n          anchorOrigin = _this$props2.anchorOrigin;\n      var anchorEl = _this.props.anchorEl || _this.anchorEl;\n\n      var anchor = _this.getAnchorPosition(anchorEl);\n\n      var target = _this.getTargetPosition(targetEl);\n\n      var targetPosition = {\n        top: anchor[anchorOrigin.vertical] - target[targetOrigin.vertical],\n        left: anchor[anchorOrigin.horizontal] - target[targetOrigin.horizontal]\n      };\n\n      if (scrolling && _this.props.autoCloseWhenOffScreen) {\n        _this.autoCloseWhenOffScreen(anchor);\n      }\n\n      if (_this.props.canAutoPosition) {\n        target = _this.getTargetPosition(targetEl); // update as height may have changed\n\n        targetPosition = _this.applyAutoPositionIfNeeded(anchor, target, targetOrigin, anchorOrigin, targetPosition);\n      }\n\n      targetEl.style.top = targetPosition.top + 'px';\n      targetEl.style.left = targetPosition.left + 'px';\n      targetEl.style.maxHeight = window.innerHeight + 'px';\n    };\n\n    _this.handleResize = (0, _lodash2.default)(_this.setPlacement, 100);\n    _this.handleScroll = (0, _lodash2.default)(_this.setPlacement.bind(_this, true), 50);\n    _this.state = {\n      open: props.open,\n      closing: false\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(Popover, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.setPlacement();\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n\n      if (nextProps.open === this.props.open) {\n        return;\n      }\n\n      if (nextProps.open) {\n        clearTimeout(this.timeout);\n        this.timeout = null;\n        this.anchorEl = nextProps.anchorEl || this.props.anchorEl;\n        this.setState({\n          open: true,\n          closing: false\n        });\n      } else {\n        if (nextProps.animated) {\n          if (this.timeout !== null) return;\n          this.setState({\n            closing: true\n          });\n          this.timeout = setTimeout(function () {\n            _this2.setState({\n              open: false\n            }, function () {\n              _this2.timeout = null;\n            });\n          }, 500);\n        } else {\n          this.setState({\n            open: false\n          });\n        }\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      this.setPlacement();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.handleResize.cancel();\n      this.handleScroll.cancel();\n\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n        this.timeout = null;\n      }\n    }\n  }, {\n    key: 'requestClose',\n    value: function requestClose(reason) {\n      if (this.props.onRequestClose) {\n        this.props.onRequestClose(reason);\n      }\n    }\n  }, {\n    key: 'getAnchorPosition',\n    value: function getAnchorPosition(el) {\n      if (!el) {\n        el = _reactDom2.default.findDOMNode(this);\n      }\n\n      var rect = el.getBoundingClientRect();\n      var a = {\n        top: rect.top,\n        left: rect.left,\n        width: el.offsetWidth,\n        height: el.offsetHeight\n      };\n      a.right = rect.right || a.left + a.width;\n      a.bottom = rect.bottom || a.top + a.height;\n      a.middle = a.left + (a.right - a.left) / 2;\n      a.center = a.top + (a.bottom - a.top) / 2;\n      return a;\n    }\n  }, {\n    key: 'getTargetPosition',\n    value: function getTargetPosition(targetEl) {\n      return {\n        top: 0,\n        center: targetEl.offsetHeight / 2,\n        bottom: targetEl.offsetHeight,\n        left: 0,\n        middle: targetEl.offsetWidth / 2,\n        right: targetEl.offsetWidth\n      };\n    }\n  }, {\n    key: 'autoCloseWhenOffScreen',\n    value: function autoCloseWhenOffScreen(anchorPosition) {\n      if (anchorPosition.top < 0 || anchorPosition.top > window.innerHeight || anchorPosition.left < 0 || anchorPosition.left > window.innerWidth) {\n        this.requestClose('offScreen');\n      }\n    }\n  }, {\n    key: 'getOverlapMode',\n    value: function getOverlapMode(anchor, target, median) {\n      if ([anchor, target].indexOf(median) >= 0) return 'auto';\n      if (anchor === target) return 'inclusive';\n      return 'exclusive';\n    }\n  }, {\n    key: 'getPositions',\n    value: function getPositions(anchor, target) {\n      var a = (0, _extends3.default)({}, anchor);\n      var t = (0, _extends3.default)({}, target);\n      var positions = {\n        x: ['left', 'right'].filter(function (p) {\n          return p !== t.horizontal;\n        }),\n        y: ['top', 'bottom'].filter(function (p) {\n          return p !== t.vertical;\n        })\n      };\n      var overlap = {\n        x: this.getOverlapMode(a.horizontal, t.horizontal, 'middle'),\n        y: this.getOverlapMode(a.vertical, t.vertical, 'center')\n      };\n      positions.x.splice(overlap.x === 'auto' ? 0 : 1, 0, 'middle');\n      positions.y.splice(overlap.y === 'auto' ? 0 : 1, 0, 'center');\n\n      if (overlap.y !== 'auto') {\n        a.vertical = a.vertical === 'top' ? 'bottom' : 'top';\n\n        if (overlap.y === 'inclusive') {\n          t.vertical = t.vertical;\n        }\n      }\n\n      if (overlap.x !== 'auto') {\n        a.horizontal = a.horizontal === 'left' ? 'right' : 'left';\n\n        if (overlap.y === 'inclusive') {\n          t.horizontal = t.horizontal;\n        }\n      }\n\n      return {\n        positions: positions,\n        anchorPos: a\n      };\n    }\n  }, {\n    key: 'applyAutoPositionIfNeeded',\n    value: function applyAutoPositionIfNeeded(anchor, target, targetOrigin, anchorOrigin, targetPosition) {\n      var _getPositions = this.getPositions(anchorOrigin, targetOrigin),\n          positions = _getPositions.positions,\n          anchorPos = _getPositions.anchorPos;\n\n      if (targetPosition.top < 0 || targetPosition.top + target.bottom > window.innerHeight) {\n        var newTop = anchor[anchorPos.vertical] - target[positions.y[0]];\n\n        if (newTop + target.bottom <= window.innerHeight) {\n          targetPosition.top = Math.max(0, newTop);\n        } else {\n          newTop = anchor[anchorPos.vertical] - target[positions.y[1]];\n\n          if (newTop + target.bottom <= window.innerHeight) {\n            targetPosition.top = Math.max(0, newTop);\n          }\n        }\n      }\n\n      if (targetPosition.left < 0 || targetPosition.left + target.right > window.innerWidth) {\n        var newLeft = anchor[anchorPos.horizontal] - target[positions.x[0]];\n\n        if (newLeft + target.right <= window.innerWidth) {\n          targetPosition.left = Math.max(0, newLeft);\n        } else {\n          newLeft = anchor[anchorPos.horizontal] - target[positions.x[1]];\n\n          if (newLeft + target.right <= window.innerWidth) {\n            targetPosition.left = Math.max(0, newLeft);\n          }\n        }\n      }\n\n      return targetPosition;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement('div', {\n        style: styles.root\n      }, _react2.default.createElement(_reactEventListener2.default, {\n        target: this.props.scrollableContainer,\n        onScroll: this.handleScroll,\n        onResize: this.handleResize\n      }), _react2.default.createElement(_RenderToLayer2.default, {\n        ref: 'layer',\n        open: this.state.open,\n        componentClickAway: this.componentClickAway,\n        useLayerForClickAway: this.props.useLayerForClickAway,\n        render: this.renderLayer\n      }));\n    }\n  }]);\n  return Popover;\n}(_react.Component);\n\nPopover.defaultProps = {\n  anchorOrigin: {\n    vertical: 'bottom',\n    horizontal: 'left'\n  },\n  animated: true,\n  autoCloseWhenOffScreen: true,\n  canAutoPosition: true,\n  onRequestClose: function onRequestClose() {},\n  open: false,\n  scrollableContainer: 'window',\n  style: {\n    overflowY: 'auto'\n  },\n  targetOrigin: {\n    vertical: 'top',\n    horizontal: 'left'\n  },\n  useLayerForClickAway: true,\n  zDepth: 1\n};\nPopover.contextTypes = {\n  muiTheme: _propTypes2.default.object.isRequired\n};\nPopover.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /**\n   * This is the DOM element that will be used to set the position of the\n   * popover.\n   */\n  anchorEl: _propTypes2.default.object,\n\n  /**\n   * This is the point on the anchor where the popover's\n   * `targetOrigin` will attach to.\n   * Options:\n   * vertical: [top, center, bottom]\n   * horizontal: [left, middle, right].\n   */\n  anchorOrigin: _propTypes4.default.origin,\n\n  /**\n   * If true, the popover will apply transitions when\n   * it is added to the DOM.\n   */\n  animated: _propTypes2.default.bool,\n\n  /**\n   * Override the default animation component used.\n   */\n  animation: _propTypes2.default.func,\n\n  /**\n   * If true, the popover will hide when the anchor is scrolled off the screen.\n   */\n  autoCloseWhenOffScreen: _propTypes2.default.bool,\n\n  /**\n   * If true, the popover (potentially) ignores `targetOrigin`\n   * and `anchorOrigin` to make itself fit on screen,\n   * which is useful for mobile devices.\n   */\n  canAutoPosition: _propTypes2.default.bool,\n\n  /**\n   * The content of the popover.\n   */\n  children: _propTypes2.default.node,\n\n  /**\n   * The CSS class name of the root element.\n   */\n  className: _propTypes2.default.string,\n\n  /**\n   * Callback function fired when the popover is requested to be closed.\n   *\n   * @param {string} reason The reason for the close request. Possibles values\n   * are 'clickAway' and 'offScreen'.\n   */\n  onRequestClose: _propTypes2.default.func,\n\n  /**\n   * If true, the popover is visible.\n   */\n  open: _propTypes2.default.bool,\n\n  /**\n   * Represents the parent scrollable container.\n   * It can be an element or a string like `window`.\n   */\n  scrollableContainer: _propTypes2.default.oneOfType([_propTypes2.default.object, _propTypes2.default.string]),\n\n  /**\n   * Override the inline-styles of the root element.\n   */\n  style: _propTypes2.default.object,\n\n  /**\n   * This is the point on the popover which will attach to\n   * the anchor's origin.\n   * Options:\n   * vertical: [top, center, bottom]\n   * horizontal: [left, middle, right].\n   */\n  targetOrigin: _propTypes4.default.origin,\n\n  /**\n   * If true, the popover will render on top of an invisible\n   * layer, which will prevent clicks to the underlying\n   * elements, and trigger an `onRequestClose('clickAway')` call.\n   */\n  useLayerForClickAway: _propTypes2.default.bool,\n\n  /**\n   * The zDepth of the popover.\n   */\n  zDepth: _propTypes4.default.zDepth\n} : {};\nexports.default = Popover;","map":{"version":3,"sources":["C:/Users/mamoussa/project/moc/node_modules/material-ui/Popover/Popover.js"],"names":["Object","defineProperty","exports","value","_extends2","require","_extends3","_interopRequireDefault","_objectWithoutProperties2","_objectWithoutProperties3","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_simpleAssign","_simpleAssign2","_react","_react2","_propTypes","_propTypes2","_reactDom","_reactDom2","_reactEventListener","_reactEventListener2","_RenderToLayer","_RenderToLayer2","_propTypes3","_propTypes4","_Paper","_Paper2","_lodash","_lodash2","_PopoverAnimationDefault","_PopoverAnimationDefault2","obj","__esModule","default","styles","root","display","Popover","_Component","props","context","_this","__proto__","call","timeout","renderLayer","_this$props","animated","animation","anchorEl","anchorOrigin","autoCloseWhenOffScreen","canAutoPosition","children","onRequestClose","style","targetOrigin","useLayerForClickAway","other","styleRoot","position","zIndex","muiTheme","popover","state","open","createElement","Animation","closing","componentClickAway","requestClose","setPlacement","scrolling","refs","layer","getLayer","targetEl","_this$props2","anchor","getAnchorPosition","target","getTargetPosition","targetPosition","top","vertical","left","horizontal","applyAutoPositionIfNeeded","maxHeight","window","innerHeight","handleResize","handleScroll","bind","key","componentDidMount","componentWillReceiveProps","nextProps","_this2","clearTimeout","setState","setTimeout","componentDidUpdate","componentWillUnmount","cancel","reason","el","findDOMNode","rect","getBoundingClientRect","a","width","offsetWidth","height","offsetHeight","right","bottom","middle","center","anchorPosition","innerWidth","getOverlapMode","median","indexOf","getPositions","t","positions","x","filter","p","y","overlap","splice","anchorPos","_getPositions","newTop","Math","max","newLeft","render","scrollableContainer","onScroll","onResize","ref","Component","defaultProps","overflowY","zDepth","contextTypes","object","isRequired","propTypes","process","env","NODE_ENV","origin","bool","func","node","className","string","oneOfType"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _simpleAssign = require('simple-assign');\n\nvar _simpleAssign2 = _interopRequireDefault(_simpleAssign);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactEventListener = require('react-event-listener');\n\nvar _reactEventListener2 = _interopRequireDefault(_reactEventListener);\n\nvar _RenderToLayer = require('../internal/RenderToLayer');\n\nvar _RenderToLayer2 = _interopRequireDefault(_RenderToLayer);\n\nvar _propTypes3 = require('../utils/propTypes');\n\nvar _propTypes4 = _interopRequireDefault(_propTypes3);\n\nvar _Paper = require('../Paper');\n\nvar _Paper2 = _interopRequireDefault(_Paper);\n\nvar _lodash = require('lodash.throttle');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _PopoverAnimationDefault = require('./PopoverAnimationDefault');\n\nvar _PopoverAnimationDefault2 = _interopRequireDefault(_PopoverAnimationDefault);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar styles = {\n  root: {\n    display: 'none'\n  }\n};\n\nvar Popover = function (_Component) {\n  (0, _inherits3.default)(Popover, _Component);\n\n  function Popover(props, context) {\n    (0, _classCallCheck3.default)(this, Popover);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Popover.__proto__ || (0, _getPrototypeOf2.default)(Popover)).call(this, props, context));\n\n    _this.timeout = null;\n\n    _this.renderLayer = function () {\n      var _this$props = _this.props,\n          animated = _this$props.animated,\n          animation = _this$props.animation,\n          anchorEl = _this$props.anchorEl,\n          anchorOrigin = _this$props.anchorOrigin,\n          autoCloseWhenOffScreen = _this$props.autoCloseWhenOffScreen,\n          canAutoPosition = _this$props.canAutoPosition,\n          children = _this$props.children,\n          onRequestClose = _this$props.onRequestClose,\n          style = _this$props.style,\n          targetOrigin = _this$props.targetOrigin,\n          useLayerForClickAway = _this$props.useLayerForClickAway,\n          other = (0, _objectWithoutProperties3.default)(_this$props, ['animated', 'animation', 'anchorEl', 'anchorOrigin', 'autoCloseWhenOffScreen', 'canAutoPosition', 'children', 'onRequestClose', 'style', 'targetOrigin', 'useLayerForClickAway']);\n\n\n      var styleRoot = style;\n\n      if (!animated) {\n        styleRoot = {\n          position: 'fixed',\n          zIndex: _this.context.muiTheme.zIndex.popover\n        };\n\n        if (!_this.state.open) {\n          return null;\n        }\n\n        return _react2.default.createElement(\n          _Paper2.default,\n          (0, _extends3.default)({ style: (0, _simpleAssign2.default)(styleRoot, style) }, other),\n          children\n        );\n      }\n\n      var Animation = animation || _PopoverAnimationDefault2.default;\n\n      return _react2.default.createElement(\n        Animation,\n        (0, _extends3.default)({\n          targetOrigin: targetOrigin,\n          style: styleRoot\n        }, other, {\n          open: _this.state.open && !_this.state.closing\n        }),\n        children\n      );\n    };\n\n    _this.componentClickAway = function () {\n      _this.requestClose('clickAway');\n    };\n\n    _this.setPlacement = function (scrolling) {\n      if (!_this.state.open) {\n        return;\n      }\n\n      if (!_this.refs.layer.getLayer()) {\n        return;\n      }\n\n      var targetEl = _this.refs.layer.getLayer().children[0];\n      if (!targetEl) {\n        return;\n      }\n\n      var _this$props2 = _this.props,\n          targetOrigin = _this$props2.targetOrigin,\n          anchorOrigin = _this$props2.anchorOrigin;\n\n      var anchorEl = _this.props.anchorEl || _this.anchorEl;\n\n      var anchor = _this.getAnchorPosition(anchorEl);\n      var target = _this.getTargetPosition(targetEl);\n\n      var targetPosition = {\n        top: anchor[anchorOrigin.vertical] - target[targetOrigin.vertical],\n        left: anchor[anchorOrigin.horizontal] - target[targetOrigin.horizontal]\n      };\n\n      if (scrolling && _this.props.autoCloseWhenOffScreen) {\n        _this.autoCloseWhenOffScreen(anchor);\n      }\n\n      if (_this.props.canAutoPosition) {\n        target = _this.getTargetPosition(targetEl); // update as height may have changed\n        targetPosition = _this.applyAutoPositionIfNeeded(anchor, target, targetOrigin, anchorOrigin, targetPosition);\n      }\n\n      targetEl.style.top = targetPosition.top + 'px';\n      targetEl.style.left = targetPosition.left + 'px';\n      targetEl.style.maxHeight = window.innerHeight + 'px';\n    };\n\n    _this.handleResize = (0, _lodash2.default)(_this.setPlacement, 100);\n    _this.handleScroll = (0, _lodash2.default)(_this.setPlacement.bind(_this, true), 50);\n\n    _this.state = {\n      open: props.open,\n      closing: false\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(Popover, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.setPlacement();\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n\n      if (nextProps.open === this.props.open) {\n        return;\n      }\n\n      if (nextProps.open) {\n        clearTimeout(this.timeout);\n        this.timeout = null;\n        this.anchorEl = nextProps.anchorEl || this.props.anchorEl;\n        this.setState({\n          open: true,\n          closing: false\n        });\n      } else {\n        if (nextProps.animated) {\n          if (this.timeout !== null) return;\n          this.setState({ closing: true });\n          this.timeout = setTimeout(function () {\n            _this2.setState({\n              open: false\n            }, function () {\n              _this2.timeout = null;\n            });\n          }, 500);\n        } else {\n          this.setState({\n            open: false\n          });\n        }\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      this.setPlacement();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.handleResize.cancel();\n      this.handleScroll.cancel();\n\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n        this.timeout = null;\n      }\n    }\n  }, {\n    key: 'requestClose',\n    value: function requestClose(reason) {\n      if (this.props.onRequestClose) {\n        this.props.onRequestClose(reason);\n      }\n    }\n  }, {\n    key: 'getAnchorPosition',\n    value: function getAnchorPosition(el) {\n      if (!el) {\n        el = _reactDom2.default.findDOMNode(this);\n      }\n\n      var rect = el.getBoundingClientRect();\n      var a = {\n        top: rect.top,\n        left: rect.left,\n        width: el.offsetWidth,\n        height: el.offsetHeight\n      };\n\n      a.right = rect.right || a.left + a.width;\n      a.bottom = rect.bottom || a.top + a.height;\n      a.middle = a.left + (a.right - a.left) / 2;\n      a.center = a.top + (a.bottom - a.top) / 2;\n\n      return a;\n    }\n  }, {\n    key: 'getTargetPosition',\n    value: function getTargetPosition(targetEl) {\n      return {\n        top: 0,\n        center: targetEl.offsetHeight / 2,\n        bottom: targetEl.offsetHeight,\n        left: 0,\n        middle: targetEl.offsetWidth / 2,\n        right: targetEl.offsetWidth\n      };\n    }\n  }, {\n    key: 'autoCloseWhenOffScreen',\n    value: function autoCloseWhenOffScreen(anchorPosition) {\n      if (anchorPosition.top < 0 || anchorPosition.top > window.innerHeight || anchorPosition.left < 0 || anchorPosition.left > window.innerWidth) {\n        this.requestClose('offScreen');\n      }\n    }\n  }, {\n    key: 'getOverlapMode',\n    value: function getOverlapMode(anchor, target, median) {\n      if ([anchor, target].indexOf(median) >= 0) return 'auto';\n      if (anchor === target) return 'inclusive';\n      return 'exclusive';\n    }\n  }, {\n    key: 'getPositions',\n    value: function getPositions(anchor, target) {\n      var a = (0, _extends3.default)({}, anchor);\n      var t = (0, _extends3.default)({}, target);\n\n      var positions = {\n        x: ['left', 'right'].filter(function (p) {\n          return p !== t.horizontal;\n        }),\n        y: ['top', 'bottom'].filter(function (p) {\n          return p !== t.vertical;\n        })\n      };\n\n      var overlap = {\n        x: this.getOverlapMode(a.horizontal, t.horizontal, 'middle'),\n        y: this.getOverlapMode(a.vertical, t.vertical, 'center')\n      };\n\n      positions.x.splice(overlap.x === 'auto' ? 0 : 1, 0, 'middle');\n      positions.y.splice(overlap.y === 'auto' ? 0 : 1, 0, 'center');\n\n      if (overlap.y !== 'auto') {\n        a.vertical = a.vertical === 'top' ? 'bottom' : 'top';\n        if (overlap.y === 'inclusive') {\n          t.vertical = t.vertical;\n        }\n      }\n\n      if (overlap.x !== 'auto') {\n        a.horizontal = a.horizontal === 'left' ? 'right' : 'left';\n        if (overlap.y === 'inclusive') {\n          t.horizontal = t.horizontal;\n        }\n      }\n\n      return {\n        positions: positions,\n        anchorPos: a\n      };\n    }\n  }, {\n    key: 'applyAutoPositionIfNeeded',\n    value: function applyAutoPositionIfNeeded(anchor, target, targetOrigin, anchorOrigin, targetPosition) {\n      var _getPositions = this.getPositions(anchorOrigin, targetOrigin),\n          positions = _getPositions.positions,\n          anchorPos = _getPositions.anchorPos;\n\n      if (targetPosition.top < 0 || targetPosition.top + target.bottom > window.innerHeight) {\n        var newTop = anchor[anchorPos.vertical] - target[positions.y[0]];\n        if (newTop + target.bottom <= window.innerHeight) {\n          targetPosition.top = Math.max(0, newTop);\n        } else {\n          newTop = anchor[anchorPos.vertical] - target[positions.y[1]];\n          if (newTop + target.bottom <= window.innerHeight) {\n            targetPosition.top = Math.max(0, newTop);\n          }\n        }\n      }\n\n      if (targetPosition.left < 0 || targetPosition.left + target.right > window.innerWidth) {\n        var newLeft = anchor[anchorPos.horizontal] - target[positions.x[0]];\n        if (newLeft + target.right <= window.innerWidth) {\n          targetPosition.left = Math.max(0, newLeft);\n        } else {\n          newLeft = anchor[anchorPos.horizontal] - target[positions.x[1]];\n          if (newLeft + target.right <= window.innerWidth) {\n            targetPosition.left = Math.max(0, newLeft);\n          }\n        }\n      }\n\n      return targetPosition;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement(\n        'div',\n        { style: styles.root },\n        _react2.default.createElement(_reactEventListener2.default, {\n          target: this.props.scrollableContainer,\n          onScroll: this.handleScroll,\n          onResize: this.handleResize\n        }),\n        _react2.default.createElement(_RenderToLayer2.default, {\n          ref: 'layer',\n          open: this.state.open,\n          componentClickAway: this.componentClickAway,\n          useLayerForClickAway: this.props.useLayerForClickAway,\n          render: this.renderLayer\n        })\n      );\n    }\n  }]);\n  return Popover;\n}(_react.Component);\n\nPopover.defaultProps = {\n  anchorOrigin: {\n    vertical: 'bottom',\n    horizontal: 'left'\n  },\n  animated: true,\n  autoCloseWhenOffScreen: true,\n  canAutoPosition: true,\n  onRequestClose: function onRequestClose() {},\n  open: false,\n  scrollableContainer: 'window',\n  style: {\n    overflowY: 'auto'\n  },\n  targetOrigin: {\n    vertical: 'top',\n    horizontal: 'left'\n  },\n  useLayerForClickAway: true,\n  zDepth: 1\n};\nPopover.contextTypes = {\n  muiTheme: _propTypes2.default.object.isRequired\n};\nPopover.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /**\n   * This is the DOM element that will be used to set the position of the\n   * popover.\n   */\n  anchorEl: _propTypes2.default.object,\n  /**\n   * This is the point on the anchor where the popover's\n   * `targetOrigin` will attach to.\n   * Options:\n   * vertical: [top, center, bottom]\n   * horizontal: [left, middle, right].\n   */\n  anchorOrigin: _propTypes4.default.origin,\n  /**\n   * If true, the popover will apply transitions when\n   * it is added to the DOM.\n   */\n  animated: _propTypes2.default.bool,\n  /**\n   * Override the default animation component used.\n   */\n  animation: _propTypes2.default.func,\n  /**\n   * If true, the popover will hide when the anchor is scrolled off the screen.\n   */\n  autoCloseWhenOffScreen: _propTypes2.default.bool,\n  /**\n   * If true, the popover (potentially) ignores `targetOrigin`\n   * and `anchorOrigin` to make itself fit on screen,\n   * which is useful for mobile devices.\n   */\n  canAutoPosition: _propTypes2.default.bool,\n  /**\n   * The content of the popover.\n   */\n  children: _propTypes2.default.node,\n  /**\n   * The CSS class name of the root element.\n   */\n  className: _propTypes2.default.string,\n  /**\n   * Callback function fired when the popover is requested to be closed.\n   *\n   * @param {string} reason The reason for the close request. Possibles values\n   * are 'clickAway' and 'offScreen'.\n   */\n  onRequestClose: _propTypes2.default.func,\n  /**\n   * If true, the popover is visible.\n   */\n  open: _propTypes2.default.bool,\n  /**\n   * Represents the parent scrollable container.\n   * It can be an element or a string like `window`.\n   */\n  scrollableContainer: _propTypes2.default.oneOfType([_propTypes2.default.object, _propTypes2.default.string]),\n  /**\n   * Override the inline-styles of the root element.\n   */\n  style: _propTypes2.default.object,\n  /**\n   * This is the point on the popover which will attach to\n   * the anchor's origin.\n   * Options:\n   * vertical: [top, center, bottom]\n   * horizontal: [left, middle, right].\n   */\n  targetOrigin: _propTypes4.default.origin,\n  /**\n   * If true, the popover will render on top of an invisible\n   * layer, which will prevent clicks to the underlying\n   * elements, and trigger an `onRequestClose('clickAway')` call.\n   */\n  useLayerForClickAway: _propTypes2.default.bool,\n  /**\n   * The zDepth of the popover.\n   */\n  zDepth: _propTypes4.default.zDepth\n} : {};\nexports.default = Popover;"]},"metadata":{},"sourceType":"script"}